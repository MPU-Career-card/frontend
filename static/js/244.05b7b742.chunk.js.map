{"version":3,"file":"static/js/244.05b7b742.chunk.js","mappings":"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","sources":["pages/specialties/ui/specialties.tsx"],"sourcesContent":["import {\n    ChangeEvent, useEffect, useRef, useState,\n} from 'react';\nimport { AxiosError } from 'axios';\n\nimport {\n    Footer,\n    SpecialitiesPromo,\n    FacultiesAccordions,\n} from 'widgets';\nimport { Container } from 'shared/ui';\nimport {\n    debounce,\n    facultiesApi,\n    getFaculty,\n    searchSpecialities,\n} from 'shared/lib';\nimport { Specialities } from 'shared/types';\n\nimport { Loading } from '../../loading';\nimport { Error } from '../../error';\n\nconst SpecialtiesPage = () => {\n    const [specialities, setSpecialities] = useState<Specialities>({});\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n    const [errorStatus, setErrorStatus] = useState<number>();\n    const [errorText, setErrorText] = useState<string>();\n\n    const isSearching = useRef<boolean>(false);\n\n    const getFaculties = async () => {\n        try {\n            setIsLoading(true);\n\n            const { data: faculties } = await facultiesApi.get<string[]>('');\n            const specialities = faculties.reduce((acc, faculty) => ({\n                ...acc,\n                [faculty]: [],\n            }), {});\n\n            setSpecialities(specialities);\n        } catch (err) {\n            if (err instanceof AxiosError) {\n                const { status, data: { detail } } = err.response || { data: {} };\n\n                setErrorStatus(status);\n                setErrorText(detail);\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const getSpecialities = async (faculty: string) => {\n        if (isSearching.current) return;\n\n        try {\n            const { data } = await getFaculty(faculty);\n\n            setSpecialities((specialities) => ({\n                ...specialities,\n                [faculty]: data.specialities,\n            }));\n        } catch (err) {\n            if (err instanceof AxiosError) {\n                const { status, data: { detail } } = err.response || { data: {} };\n\n                setErrorStatus(status);\n                setErrorText(detail);\n            }\n        }\n    };\n\n    const search = async (search: string) => {\n        if (!search) {\n            isSearching.current = false;\n            getFaculties();\n\n            return;\n        }\n\n        try {\n            isSearching.current = true;\n\n            const { data } = await searchSpecialities(search);\n            const specialities: Specialities = Object.keys(data).reduce((acc, faculty) => ({\n                ...acc,\n                [faculty]: data[faculty].specialities,\n            }), {});\n\n            console.log({ specialities });\n\n            setSpecialities(specialities);\n        } catch (err) {\n            if (err instanceof AxiosError) {\n                const { status, data: { detail } } = err.response || { data: {} };\n\n                setErrorStatus(status);\n                setErrorText(detail);\n            }\n        }\n    };\n\n    const debouncedSearch = debounce(search, 300);\n\n    const onSearchInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n        debouncedSearch(e.target.value);\n    };\n\n    useEffect(() => {\n        getFaculties();\n    }, []);\n\n    if (isLoading) {\n        return <Loading />;\n    }\n\n    if (errorStatus || errorText) {\n        return (\n            <Error\n                status={errorStatus}\n                description={errorText}\n            />\n        );\n    }\n    return (\n        <Container>\n            <SpecialitiesPromo\n                image={`${process.env.PUBLIC_URL}/assets/promo.jpg`}\n                title=\"Карьерные карты\"\n                description=\"- это проект, который поможет тебе определиться с\n                будущей профессией и выбрать нужное направление подготовки в Московском Политехе\"\n            />\n            <FacultiesAccordions\n                specialities={specialities}\n                getSpecialities={getSpecialities}\n                onSearchInputChange={onSearchInputChange}\n                marginTop={100}\n                marginBottom={100}\n            />\n            <Footer />\n        </Container>\n    );\n};\n\nexport default SpecialtiesPage;\n"],"names":["_useState","useState","_useState2","_slicedToArray","specialities","setSpecialities","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","errorStatus","setErrorStatus","_useState7","_useState8","errorText","setErrorText","isSearching","useRef","getFaculties","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$facultiesApi$g","faculties","_specialities","_ref2","status","detail","wrap","_context","prev","next","facultiesApi","get","sent","data","reduce","acc","faculty","_objectSpread","_defineProperty","t0","AxiosError","response","finish","stop","apply","arguments","getSpecialities","_ref3","_callee2","_yield$getFaculty","_ref4","_context2","current","abrupt","getFaculty","_x","search","_ref5","_callee3","_yield$searchSpeciali","_specialities2","_ref6","_context3","searchSpecialities","Object","keys","console","log","_x2","debouncedSearch","debounce","useEffect","_jsx","Loading","Error","description","_jsxs","Container","children","SpecialitiesPromo","image","concat","process","title","FacultiesAccordions","onSearchInputChange","e","target","value","marginTop","marginBottom","Footer"],"sourceRoot":""}